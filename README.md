---

# 🔑 تفاوت اصلی

* **`.loc`** → انتخاب بر اساس **label** (نام ایندکس‌ها و ستون‌ها)
* **`.iloc`** → انتخاب بر اساس **موقعیت عددی (integer position)**

---

## 🎯 `.loc` (label-based indexing)

```python
import pandas as pd

df = pd.DataFrame({
    'name': ['Ali','Sara','Nima','Reza'],
    'age': [23,30,27,35],
    'score': [85,92,78,60]
}, index=['a','b','c','d'])

print(df)
```

```
  name  age  score
a  Ali   23     85
b  Sara  30     92
c  Nima  27     78
d  Reza  35     60
```

### مثال‌ها:

```python
df.loc['a']                 # یک ردیف با label
df.loc[['a','c']]           # چند ردیف
df.loc['a':'c']             # بازه‌ی برچسب‌ها (شامل 'c')

df.loc['a', 'name']         # سطر 'a' و ستون 'name'
df.loc[:, 'age']            # همه‌ی ردیف‌ها، فقط ستون age
df.loc[['a','c'], ['name','score']]  # ترکیبی

# شرطی:
df.loc[df['age'] > 25, ['name','score']]
```

📌 نکته: در `.loc` وقتی slice می‌گیری (`'a':'c'`) انتهای بازه **شامل** می‌شود.

---

## 🎯 `.iloc` (position-based indexing)

```python
df.iloc[0]                  # ردیف اول
df.iloc[[0,2]]              # ردیف‌های اول و سوم
df.iloc[0:3]                # ردیف‌های 0 تا 2

df.iloc[0, 1]               # ردیف 0، ستون 1 → 23
df.iloc[:, 2]               # همه ردیف‌ها، ستون شماره 2 (score)
df.iloc[0:2, 0:2]           # سطرهای 0 و 1، ستون‌های 0 و 1
```

📌 نکته: در `.iloc` وقتی slice می‌گیری (`0:3`) انتهای بازه **شامل نمی‌شود** (مثل لیست‌های پایتون).

---

## 📊 مقایسه‌ی سریع

| ویژگی            | `.loc`                    | `.iloc`                |
| ---------------- | ------------------------- | ---------------------- |
| مبنا             | Label (نام)               | Index عددی (موقعیت)    |
| انتهای slice     | شامل می‌شود               | شامل نمی‌شود           |
| مثال             | `df.loc['a':'c']` → a,b,c | `df.iloc[0:3]` → 0,1,2 |
| قابل استفاده روی | ایندکس‌ها + ستون‌ها       | فقط موقعیت عددی        |

---

## 🧩 ترکیب شرطی + loc

```python
# دانش‌آموزانی که نمره بالای 80 دارند، ستون name فقط
df.loc[df['score'] > 80, 'name']
```

---

## ❗ خطاهای رایج

* `df.loc[0]` → به دنبال **label=0** می‌گردد، نه ردیف اول!
* اگر ایندکس شما 100 تا 200 باشد، `df.loc[0]` خطا می‌دهد.
* برای **ردیف اول واقعی** از `df.iloc[0]` استفاده کن.

---

